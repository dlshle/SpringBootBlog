<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spring Boot blog demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="css/bulma.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/common.css">
</head>
<body>

<!--页面整体结构-->
<div id="app">
    <x-header></x-header>
    <main class="section main">
        <x-alert></x-alert>
        <router-view></router-view>
    </main>
</div>

<footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <p>AllAboutME</p>
            <p>This is a UW-Madison CS 506 Project</p>
        </div>
    </div>
</footer>

<!--header template-->
<script id="header" type="text/x-template">
    <header>
        <nav class="nav has-shadow">
            <div class="nav-left">
                <router-link class="nav-item" to="/">
                    <h1 class="title is-4">All About ME!</h1>
                </router-link>
            </div>
            <div class="nav-center" v-if="currentUser === null">
                <router-link class="nav-item" to="/signup">
                    <button class="button is-primary">Signup</button>
                </router-link>
                <router-link class="nav-item" to="/login">
                    <button class="button is-primary">Login</button>
                </router-link>
            </div>
            <div class="nav-center" v-else>
                <span class="nav-item">{{ currentUser.name }}</span>
                <router-link to="/posts/new" class="nav-item">
                    <button class="button is-primary">A story to tell</button>
                </router-link>
                <a class="nav-item">
                    <button class="button is-primary" @click="logout">Logout</button>
                </a>
            </div>
        </nav>
    </header>
</script>

<!--posts list template-->
<script id="posts" type="text/x-template">
    <ul class="content posts">
        <li v-for="post in posts" class="box">
            <router-link :to="'/posts/' + post.id"><h1 class="">{{ post.title }}</h1></router-link>
            <p><strong>{{ post.author.name}}</strong> •
                <small>{{ post.createTime | longToDate }}</small>
            </p>
            <section> {{ post.content.substring(0, 200) }} ...</section>
        </li>
    </ul>
</script>

<!--posts list template-->
<script id="post-detail" type="text/x-template">
    <article class="content post">
        <h1 class="has-text-centered">{{ post.title }}</h1>
        <p class="has-text-right"><strong>{{ post.author.name }}
            ({{post.author.id}})</strong> •
            <small>{{ post.createTime | longToDate }}</small>
        </p>
        <section v-html="compiledMarkdown"></section>
    </article>
</script>

<!--login form template-->
<script id="login-form" type="text/x-template">
    <form @submit="handleSubmit">
        <label class="label" for="name">用户名</label>
        <p class="control">
            <input v-model="name" class="input" type="text" id="name" placeholder="请输入用户名">
        </p>
        <label class="label" for="password">密码</label>
        <p class="control">
            <input v-model="password" class="input" type="password" id="password" placeholder="请输入密码">
        </p>
        <p class="control">
            <input class="button is-primary is-12" type="submit" value="登录">
        </p>
    </form>
</script>

<!--signup form template-->
<script id="signup-form" type="text/x-template">
    <form @submit="handleSubmit">
        <label class="label" for="name">Username</label>
        <p class="control">
            <input v-model="name" class="input" type="text" id="name"
                   placeholder="Please put username here.">
        </p>
        <label class="label" for="password">Password:</label>
        <p class="control">
            <input v-model="password" class="input" type="password"
                   id="password" placeholder="Please put password here.">
        </p>
        <label class="label" for="password">Confirm password:</label>
        <p class="control">
            <input v-model="passwordAgain" class="input" type="password"
                   id="password-again"
                   placeholder="Please put password here again">
        </p>
        <label class="label" for="classTaken">What classes have you
            taken:</label>
        <p class="control">
            <input v-model="classTaken" class="input" type="text"
                   id="classTaken"
                   placeholder="Please put classes you've taken(separated by comma)">
        </p>
        <label class="label" for="funStuff">Any fun stuff:</label>
        <p class="control">
            <input v-model="classTaken" class="input" type="text"
                   id="funStuff"
                   placeholder="Please put some fun stuff you've done(separated by comma)">
        </p>
        <label class="label" for="otherStuff">What else do you want to
             tell others:</label>
        <p class="control">
            <input v-model="classTaken" class="input" type="text"
                   id="otherStuff"
                   placeholder="Put any other stuff">
        </p>
        <label class="label" for="links">Any link you want to share:</label>
        <p class="control">
            <input v-model="classTaken" class="input" type="text"
                   id="links"
                   placeholder="Put any link here(separated by comma)">
        </p>
        <p class="control">
            <input class="button is-primary is-12" type="submit"
                   value="Register">
        </p>
    </form>
</script>

<!--new post template-->
<script id="new-post" type="text/x-template">
    <form @submit.prevent="handleSubmit">
        <label for="title">Whassup:</label>
        <p class="control"><input type="text" v-model="title" id="title" class="input"></p>
        <label for="content">What's this about:</label>
        <p class="control"><textarea id="content" v-model="content" class="textarea"></textarea></p>
        <p class="control"><input type="submit" class="button is-primary"
                                  value="I'm done"></p>
    </form>
</script>

<!-- alert template-->
<script id="alert" type="text/x-template">
    <transition name="fade">
        <div class="notification" :class="classObject" v-show="visible">
            <button class="delete" @click="reset"></button>
            {{ message }}
        </div>
    </transition>
</script>
<script src="js/vue.js"></script>
<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
<script src="js/axios.min.js"></script>
<script src="js/marked.min.js"></script>
<script src="js/index.js"></script>
</body>
</html>